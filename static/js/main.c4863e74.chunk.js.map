{"version":3,"sources":["../../scripts/manifest.js","cmp/BufImageGrey32.js","cmp/Popup.js","cmp/DataViewer.js","../../scripts/server.js","../../scripts/network.js","../../scripts/cache.js","../../scripts/engine.js","KolmoApplication.js","../../scripts/wasm.js","cmp/ViewButton.js","../../scripts/wasm_go.js","../../scripts/formula.js","cmp/Cache.js","cmp/Network.js","cmp/Formula.js","cmp/Manifest.js","cmp/NavTabs.js","App.js","serviceWorker.js","cmp/RunButton.js","index.js"],"names":["Manifest","json","this","key","value","JSON","stringify","result","status","data","hasOwnProperty","MIME","size","Uint8Array","Buffer","from","raw","doi","push","_this","formulas","forEach","json_formula","error","BufImageGrey32","props","state","dataView","DataView","buffer","canvas","document","createElement","context","getContext","width","getUint32","height","currImageData","createImageData","i","data_index","r","image_index","putImageData","dataURI","toDataURL","setState","src","alt","Component","PopupStyle","InnerPopupStyle","DataStyle","butStyle","Popup","axis","handle","defaultPosition","x","y","position","grid","scale","onStart","handleStart","onDrag","handleDrag","onStop","handleStop","style","className","onClick","closePopup","role","aria-label","React","DataViewer","application","viewerIsShown","showData","updateDataView","bind","setUpdateDataView","clearDataView","data_to_view","clearBtn","indexOf","length","TextDecoder","decode","undefined","stringFromOctetStream","dataTogglePopup","str","count","index","res","toString","toUpperCase","Server","address","_get_manifest_by_doi","mark","_callee","url","response","json_data","wrap","_context","prev","next","fetch","sent","statusText","t0","t1","abrupt","stop","_x","apply","arguments","_get_data_by_doi","_callee2","raw_data","_context2","arrayBuffer","_x2","Network","settings","cache","Cache","Error","DedicatedServer","_search_manifest","manifest","dois","search_result","source","get_doi","keys","done","search_manifest_by_doi","_search_manifest_by_doi","json_manifest","_manifest","get_manifest_by_doi","set_manifest_by_doi","_search_data","_callee3","_context3","search_data_by_doi","_x3","_search_data_by_doi","_callee4","server_data","_context4","get_data_by_doi","set_data_by_doi","_x4","innerStorage","Map","localStorage","getItem","parse","console","log","get","ToString","setItem","set","removeItem","delete","Math","ceil","parseInt","substr","array_data","padStart","cached_manifests","get_cached_manifests","delete_manifest_by_doi","cached_data","get_cached_data","delete_data_by_doi","_key","startsWith","replace","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","_doi","_manifest2","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_key3","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_doi2","_data","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","Engine","_eval_manifest","raw_value","get_raw_value","search_data","get_formulas","search_manifest","eval_formula","_eval_formula","formula","dependencies","get_dependencies","eval_manifest","eval","_eval2","doi_data_formula","dependencies_data","dependency_manifest","manifest_data","eval_result","t2","t3","get_data_by_manifest","ArgName","KolmoApplication","dedicated_server_address","options","engine","update_manifest","update_data_view","current_manifest","current_manifest_status","manifest_focus_list","network","str_manifest","pop","Wasm","raw_wasm","jsglue","wasm","wasm_memory","_un_init","_init","wasmModule","utf8decoder","Module","WebAssembly","compile","instantiate","exports","memory","Function","Promise","resolve","reject","wasmBinary","onRuntimeInitialized","wasmMemory","create_error","_exec","args","init_res","arg","arg_index","arg_name_buffer","pointer","pWasmData","argSize","argPointer","pWasmArgData","j","resSize","resPointer","result_data","pResultData","k","init","_set_arg_name","Uint8ClampedArray","_get_arg_index","create_last_error","_set_arg","_get_result_size","_get_result","text","_get_last_error","_get_last_error_size","ViewButton","textAreaID","manifestDataHolderID","actionClick","event","ReactDOM","unmountComponentAtNode","getElementById","btn_caption","target","innerHTML","process","manifestText","render","then","WasmGo","jsglue_go","mod","inst","Go","importObject","run","resutl","_gowasm_setArg","_gowasm_lastError","_gowasm_execute","Formula","parameters","actor","parameter","param","wasm_wrapper","mime","exec","get_mime","un_init","updateApp","handleCacheOper","handleDataView","handleDataDownload","handleManifestView","name","startCount","ext","blob","Blob","type","link","href","window","URL","createObjectURL","download","click","cm","cd","col6","cachedManifests","map","title","strDigest","viewManifestButton","cachedData","viewDataButton","DataDownloadButton","get_cached_manifests_size","get_cached_data_size","fetchManifestResult","fetchDataResult","defaultValue","handleFetch","handleDOIChange","handleClearDOI","fetchRes","id","onChange","display","evalResult","handleEval","btn","dep","getDependencies","init_manifest","rootManifest","showFormulas","handleFetchManifest","handleRemoveManifest","handleFetchData","handleRemoveData","handleViewData","updateManifest","setUpdateManifest","handleChangeManifestFocus","rawData","PopManifestFocusList","PushManifestFocusList","getCurrentManifest","updatedManifest","ManifestHeader","manifestDoi","manifestInCache","dataInCache","manifestMime","manifestSize","get_size","manifestS","toFixed","viewButton","ManifestControls","mC","pW","dC","dV","outStr","focus_button","ManifestFocusListIsEmpty","getManifestFormulas","getManifestHeader","getManifestControls","NavTabs","cacheIsShown","networkIsShown","data-toggle","aria-controls","aria-selected","handleHomePage","handleShowCache","handleShowNetwork","handleShowViewer","handleClearAll","App","setNewManifest","clear","getCache","getNetwork","forceUpdate","Boolean","location","hostname","match","RunButton","querySelectorAll","interactivePanel","querySelector","buttonElement","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c4863e74.chunk.js","sourcesContent":["import _classCallCheck from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport Formula from './formula.js';\n\nvar Manifest =\n/*#__PURE__*/\nfunction () {\n  function Manifest(json) {\n    _classCallCheck(this, Manifest);\n\n    this.json = json; // TODO: Implement validation RULES:\n    // 1. has no doi -> HAVE TO own raw value or at least one formula\n    // 2. has no MIME -> HAVE TO own doi or at least one formula\n  }\n\n  _createClass(Manifest, [{\n    key: \"ToString\",\n    value: function ToString() {\n      return JSON.stringify(this.json);\n    }\n  }, {\n    key: \"get_mime\",\n    value: function get_mime() {\n      var result = {\n        status: \"Has no MIME\",\n        data: null\n      };\n\n      if (this.json.hasOwnProperty(\"MIME\")) {\n        result.status = \"ok\";\n        result.data = this.json.MIME;\n      }\n\n      return result;\n    }\n  }, {\n    key: \"get_size\",\n    value: function get_size() {\n      var result = {\n        status: \"Has no size\",\n        data: null\n      };\n\n      if (this.json.hasOwnProperty(\"size\")) {\n        result.status = \"ok\";\n        result.data = this.json.size;\n      }\n\n      return result;\n    }\n  }, {\n    key: \"get_raw_value\",\n    value: function get_raw_value() {\n      var result = {\n        status: \"Has no raw\",\n        data: []\n      };\n\n      if (this.json.hasOwnProperty(\"raw\")) {\n        result.status = \"ok\";\n        result.data = new Uint8Array(Buffer.from(this.json.raw));\n      }\n\n      return result;\n    }\n  }, {\n    key: \"get_doi\",\n    value: function get_doi() {\n      var result = {\n        status: \"ok\",\n        data: []\n      };\n\n      if (this.json.hasOwnProperty(\"doi\")) {\n        for (var doi in this.json.doi) {\n          result.data.push(this.json.doi[doi]);\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"get_formulas\",\n    value: function get_formulas() {\n      var _this = this;\n\n      var result = {\n        status: \"\",\n        data: []\n      };\n\n      if (this.json.hasOwnProperty(\"formulas\")) {\n        this.json.formulas.forEach(function (json_formula) {\n          try {\n            result.data.push(new Formula(json_formula, _this));\n          } catch (error) {\n            result.status += \"Error creating formula (\" + error + \") \";\n          }\n        });\n      }\n\n      if (\"\" === result.status) result.status = \"ok\";\n      return result;\n    }\n  }]);\n\n  return Manifest;\n}();\n\nexport default Manifest;","import React, { Component } from 'react';\n\nclass BufImageGrey32 extends Component {\n    \n    constructor(props) \n    {\n        super(props)\n\n        this.state = {\n            data: props.data,\n        }\n    }\n    \n    componentWillMount () {\n\n        var data = new Uint8Array(this.state.data);\n        var dataView = new DataView(data.buffer);\n\n        const canvas = document.createElement('canvas')\n        const context = canvas.getContext('2d')\n\n        canvas.width = dataView.getUint32(0, false); // dx\n        canvas.height = dataView.getUint32(4, false); // dy\n\n        var currImageData = context.createImageData(canvas.width, canvas.height);\n\n        let size = canvas.width * canvas.height\n\n        for (var i = 0; i < size; i++)\n        {\n            var data_index = 8 + i * 4;\n            var r = dataView.getUint32(data_index, false) / 255\n\n            var image_index = i * 4;\n            currImageData.data[image_index] = r\n            currImageData.data[image_index+1] = r\n            currImageData.data[image_index+2] = r\n            currImageData.data[image_index+3] = 255\n        }\n\n        context.putImageData(currImageData, 0, 0);\n    \n        const dataURI = canvas.toDataURL()\n\n        this.setState({dataURI})\n      }\n    \n      render() {\n        return <img src={this.state.dataURI} alt=\"\" />\n      }\n}\n\nexport default BufImageGrey32;","import React from 'react';\nimport Draggable from 'react-draggable';\nconst PopupStyle = {\n\n\"position\":\"fixed\",\n\"top\":\"0\",\n\"left\":\"0\",\n\"right\":\"0\",\n\"bottom\":\"0\",\n\"maxWidth\" : \"50%\",\n\"maxHeight\" : \"50%\",\n\"margin\":\"auto\",\n\"borderRadius\":\"20px\",\n\"backgroundColor\":\"rgba(0,0,0, 0.6)\",\n\"zIndex\": \"10\",\n}\nconst InnerPopupStyle = \n\n{\"position\":\"absolute\",\n\"left\":\"5%\",\n\"right\":\"5%\",\n\"color\": \"#3d3d3d\",\n\"top\":\"10%\",\n\"bottom\":\"5%\",\n\"margin\":\"auto\",\n\"borderRadius\":\"20px\",\n\"background\":\"white\",\n\"text\":\"left\",\n\"overflow\" : \"auto\",\n}\n\nconst DataStyle = \n{\n  \"marginTop\":\"5%\",\n  \"marginBottom\":\"5%\",\n }\nconst butStyle = \n{\n  \"zIndex\" : \"50,\"\n}\n\nclass Popup extends React.Component {  \n  render() { \n\n   \nreturn (  \n  <Draggable\n        axis=\"both\"\n        handle=\".handle\"\n        defaultPosition={{x: 0, y: 0}}\n        position={null}\n        grid={[25, 25]}\n        scale={1}\n        onStart={this.handleStart}\n        onDrag={this.handleDrag}\n        onStop={this.handleStop}>\n    <div  style={PopupStyle} className='handle'>  \n<div className=\"d-flex justify-content-end m-0\">\n<button style={butStyle} className=\"btn btn-md btn-secondary bottom m-1\" onClick={this.props.closePopup}><span role=\"img\" aria-label=\"close\">&#10060;</span></button> \n</div>\n<div  style={InnerPopupStyle} className='popup\\_inner'>  \n<div style={DataStyle}>\n<pre className=\"text-left row m-2 container-fluid\">{this.props.data}</pre>\n </div>\n</div>  \n</div>  \n</Draggable>\n);  \n}  \n}  \n\nexport default Popup;","import React, { Component } from 'react';\nimport BufImageGrey32 from './BufImageGrey32.js';\nimport Popup from './Popup.js';\n\nclass DataViewer extends Component {\n\n    constructor(props) \n    {\n        super(props)\n\n        this.state = {\n            application: props.application,\n            data: props.data,\n            doi: \"\",\n            viewerIsShown: props.viewerIsShown,\n            showData: props.showData,\n            \n        }\n\n        if (this.state.application)\n        {\n            this.updateDataView = this.updateDataView.bind(this)\n            this.state.application.setUpdateDataView(this.updateDataView)\n        }\n\n        this.clearDataView = this.clearDataView.bind(this)\n    }\n    \n    clearDataView(){\n        this.updateDataView(null)\n    }\n\n    updateDataView(data_to_view)\n    {\n        this.setState({\n            data: data_to_view,\n        })\n    }\n\n    \n\n\n    render()\n    {\n       if (null == this.state.data)\n\n            return (<div className=\"DataViewer p-2 bg-secondary rounded mb-0 text-white\">\n           {this.props.viewerIsShown ? <div><div className=\"col-md-12 font-weight-bold m-2\">DATA VIEW</div>\n           <div className=\"alert alert-success alert-dismissible fade show text-truncate text-left m-2\">Fetch manifest and/or data</div> </div>: null}\n            </div>);\n\n            \n\n        let clearBtn = \"\"\n        if (this.state.application)\n            clearBtn = <div><button className=\"btn btn-sm btn-warning m-3\" onClick={this.clearDataView}>Clear</button></div>\n\n        let data_to_view = \"Not supported to view MIME (\" + this.state.data.MIME + \")\"\n\n        if (-1 !== this.state.data.MIME.indexOf(\"text\"))\n        {\n            if (0 !== this.state.data.data.length) {\n                let utf8decoder = new TextDecoder();\n                data_to_view = utf8decoder.decode(this.state.data.data)\n            }\n            else\n                data_to_view = \"{empty}\"\n        }\n\n        if (-1 !== this.state.data.MIME.indexOf(\"json\"))\n            data_to_view = JSON.stringify(this.state.data.data, undefined, 2)\n\n        if (-1 !== this.state.data.MIME.indexOf(\"manifest\"))\n            data_to_view = JSON.stringify(this.state.data.data.json, undefined, 2)\n        \n        if (-1 !== this.state.data.MIME.indexOf(\"octet-stream\"))\n            data_to_view = this.stringFromOctetStream(this.state.data.data)\n\n        if (-1 !== this.state.data.MIME.indexOf(\"BufImage/Grey32\"))\n            data_to_view = <BufImageGrey32 data={this.state.data.data}/>\n\n        \n            \n        return (\n\n       \n           (this.props.viewerIsShown !== false) ?\n            <div className=\"DataViewer bg-secondary rounded mb-0 text-white p-2\">\n                     <div className=\"col-md-12 font-weight-bold m-2\">DATA VIEW</div>\n                    <div className=\"alert alert-success alert-dismissible fade show text-truncate m-2\"><pre className=\"text-left row m-2 container-fluid\">{data_to_view}</pre></div>\n                    <div>{this.state.doi}</div>\n                    <div className=\"col-md-12\">\n                    {clearBtn}</div>\n           </div> : \n           (this.props.showData !== false) ? <Popup data={data_to_view} closePopup={this.props.dataTogglePopup}/> : null \n            );\n    }\n\n    stringFromOctetStream(data)\n    {\n        const maxCount = 50;\n        var str = \"\";\n        var count = data.length;\n\n        if (count > maxCount)\n        {\n            count = maxCount;\n            str = \"First \" + maxCount + \" bytes: \";\n        }\n\n        for (var index = 0; index < count;)\n        {\n            var ch = data[index++];\n            \n            var res = ch.toString(16).toUpperCase();\n            \n            if (res.length === 1) res = '0' + res;\n            \n            str += res;\n        }\n\n        return str\n    }\n}\n\nexport default DataViewer;","import _regeneratorRuntime from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nvar Server =\n/*#__PURE__*/\nfunction () {\n  function Server(address) {\n    _classCallCheck(this, Server);\n\n    this.address = address;\n  }\n\n  _createClass(Server, [{\n    key: \"get_manifest_by_doi\",\n    value: function () {\n      var _get_manifest_by_doi = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(doi) {\n        var result, url, response, json_data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  data: null\n                };\n                url = this.address + '/search?doi=' + doi;\n                _context.prev = 2;\n                _context.next = 5;\n                return fetch(url);\n\n              case 5:\n                response = _context.sent;\n                _context.prev = 6;\n\n                if (!(200 === response.status)) {\n                  _context.next = 15;\n                  break;\n                }\n\n                _context.next = 10;\n                return response.json();\n\n              case 10:\n                json_data = _context.sent;\n                result.data = json_data;\n                result.status = \"ok\";\n                _context.next = 16;\n                break;\n\n              case 15:\n                result.status = \"Response error: \" + response.statusText;\n\n              case 16:\n                _context.next = 21;\n                break;\n\n              case 18:\n                _context.prev = 18;\n                _context.t0 = _context[\"catch\"](6);\n                result.status = \"Error parsing request (\" + _context.t0 + \")\";\n\n              case 21:\n                _context.next = 26;\n                break;\n\n              case 23:\n                _context.prev = 23;\n                _context.t1 = _context[\"catch\"](2);\n                result.status = \"Error requesting server (\" + _context.t1 + \")\";\n\n              case 26:\n                return _context.abrupt(\"return\", result);\n\n              case 27:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 23], [6, 18]]);\n      }));\n\n      function get_manifest_by_doi(_x) {\n        return _get_manifest_by_doi.apply(this, arguments);\n      }\n\n      return get_manifest_by_doi;\n    }()\n  }, {\n    key: \"get_data_by_doi\",\n    value: function () {\n      var _get_data_by_doi = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(doi) {\n        var result, url, response, raw_data;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  data: null\n                };\n                url = this.address + '/raw/' + doi;\n                _context2.prev = 2;\n                _context2.next = 5;\n                return fetch(url);\n\n              case 5:\n                response = _context2.sent;\n\n                if (!(200 === response.status)) {\n                  _context2.next = 14;\n                  break;\n                }\n\n                _context2.next = 9;\n                return response.arrayBuffer();\n\n              case 9:\n                raw_data = _context2.sent;\n                result.data = raw_data;\n                result.status = \"ok\";\n                _context2.next = 15;\n                break;\n\n              case 14:\n                result.status = \"Response error: \" + response.statusText;\n\n              case 15:\n                _context2.next = 20;\n                break;\n\n              case 17:\n                _context2.prev = 17;\n                _context2.t0 = _context2[\"catch\"](2);\n                result.status = \"Error requesting server (\" + _context2.t0 + \")\";\n\n              case 20:\n                return _context2.abrupt(\"return\", result);\n\n              case 21:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[2, 17]]);\n      }));\n\n      function get_data_by_doi(_x2) {\n        return _get_data_by_doi.apply(this, arguments);\n      }\n\n      return get_data_by_doi;\n    }()\n  }]);\n\n  return Server;\n}();\n\nexport default Server;","import _regeneratorRuntime from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport Server from './server.js';\nimport Manifest from './manifest.js';\n\nvar Network =\n/*#__PURE__*/\nfunction () {\n  function Network(settings, cache) {\n    _classCallCheck(this, Network);\n\n    this.Cache = cache;\n\n    if (settings.hasOwnProperty(\"DedicatedServer\")) {\n      this.DedicatedServer = new Server(settings[\"DedicatedServer\"]);\n      return;\n    }\n\n    throw new Error(\"Bad network settings\");\n  }\n\n  _createClass(Network, [{\n    key: \"search_manifest\",\n    value: function () {\n      var _search_manifest = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(manifest) {\n        var result, dois, doi, search_result;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                result = {\n                  status: \"Not found\",\n                  source: null,\n                  data: null\n                };\n                dois = manifest.get_doi();\n\n                if (!(0 === dois.data.length)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                result.status = \"Manifest has no doi\";\n                return _context.abrupt(\"return\", result);\n\n              case 5:\n                if (!this.DedicatedServer) {\n                  _context.next = 22;\n                  break;\n                }\n\n                _context.t0 = _regeneratorRuntime.keys(dois.data);\n\n              case 7:\n                if ((_context.t1 = _context.t0()).done) {\n                  _context.next = 22;\n                  break;\n                }\n\n                doi = _context.t1.value;\n                _context.next = 11;\n                return this.search_manifest_by_doi(dois.data[doi]);\n\n              case 11:\n                search_result = _context.sent;\n\n                if (!(\"ok\" === search_result.status)) {\n                  _context.next = 19;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.source = search_result.source;\n                result.data = search_result.data;\n                return _context.abrupt(\"return\", result);\n\n              case 19:\n                result.status = search_result.status;\n\n              case 20:\n                _context.next = 7;\n                break;\n\n              case 22:\n                return _context.abrupt(\"return\", result);\n\n              case 23:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function search_manifest(_x) {\n        return _search_manifest.apply(this, arguments);\n      }\n\n      return search_manifest;\n    }()\n  }, {\n    key: \"search_manifest_by_doi\",\n    value: function () {\n      var _search_manifest_by_doi = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(doi) {\n        var result, manifest, json_manifest, _manifest;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  source: null,\n                  data: null\n                };\n\n                if (!(\"\" == doi)) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                result.status = \"Empty doi\";\n                return _context2.abrupt(\"return\", result);\n\n              case 4:\n                if (!this.DedicatedServer) {\n                  _context2.next = 18;\n                  break;\n                }\n\n                manifest = this.Cache.get_manifest_by_doi(doi);\n\n                if (!(\"ok\" === manifest.status)) {\n                  _context2.next = 12;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.source = \"Cache\";\n                result.data = manifest.data;\n                _context2.next = 16;\n                break;\n\n              case 12:\n                _context2.next = 14;\n                return this.DedicatedServer.get_manifest_by_doi(doi);\n\n              case 14:\n                json_manifest = _context2.sent;\n\n                if (\"ok\" === json_manifest.status) {\n                  try {\n                    _manifest = new Manifest(json_manifest.data);\n                    result.status = \"ok\";\n                    result.source = \"Network\";\n                    result.data = _manifest;\n                    this.Cache.set_manifest_by_doi(_manifest, doi);\n                  } catch (error) {\n                    result.status = \"Not valid manifest (\" + error + \")\";\n                  }\n                } else {\n                  result.status = json_manifest.status;\n                }\n\n              case 16:\n                _context2.next = 19;\n                break;\n\n              case 18:\n                result.status = \"Not implimented\";\n\n              case 19:\n                return _context2.abrupt(\"return\", result);\n\n              case 20:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function search_manifest_by_doi(_x2) {\n        return _search_manifest_by_doi.apply(this, arguments);\n      }\n\n      return search_manifest_by_doi;\n    }()\n  }, {\n    key: \"search_data\",\n    value: function () {\n      var _search_data = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(manifest) {\n        var result, dois, doi, search_result;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                result = {\n                  status: \"Not found\",\n                  source: null,\n                  data: null\n                };\n                dois = manifest.get_doi();\n\n                if (!(0 === dois.data.length)) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                result.status = \"Manifest has no doi\";\n                return _context3.abrupt(\"return\", result);\n\n              case 5:\n                if (!this.DedicatedServer) {\n                  _context3.next = 22;\n                  break;\n                }\n\n                _context3.t0 = _regeneratorRuntime.keys(dois.data);\n\n              case 7:\n                if ((_context3.t1 = _context3.t0()).done) {\n                  _context3.next = 22;\n                  break;\n                }\n\n                doi = _context3.t1.value;\n                _context3.next = 11;\n                return this.search_data_by_doi(dois.data[doi]);\n\n              case 11:\n                search_result = _context3.sent;\n\n                if (!(\"ok\" === search_result.status)) {\n                  _context3.next = 19;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.source = search_result.source;\n                result.data = search_result.data;\n                return _context3.abrupt(\"return\", result);\n\n              case 19:\n                result.status = search_result.status;\n\n              case 20:\n                _context3.next = 7;\n                break;\n\n              case 22:\n                return _context3.abrupt(\"return\", result);\n\n              case 23:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function search_data(_x3) {\n        return _search_data.apply(this, arguments);\n      }\n\n      return search_data;\n    }()\n  }, {\n    key: \"search_data_by_doi\",\n    value: function () {\n      var _search_data_by_doi = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(doi) {\n        var result, data, server_data;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  source: null,\n                  data: null\n                };\n\n                if (!this.DedicatedServer) {\n                  _context4.next = 22;\n                  break;\n                }\n\n                data = this.Cache.get_data_by_doi(doi);\n\n                if (!(\"ok\" === data.status)) {\n                  _context4.next = 8;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.source = \"Cache\";\n                result.data = data.data;\n                return _context4.abrupt(\"return\", result);\n\n              case 8:\n                _context4.next = 10;\n                return this.DedicatedServer.get_data_by_doi(doi);\n\n              case 10:\n                server_data = _context4.sent;\n\n                if (!(\"ok\" === server_data.status)) {\n                  _context4.next = 19;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.source = \"Network\";\n                result.data = server_data.data;\n                this.Cache.set_data_by_doi(server_data.data, doi);\n                return _context4.abrupt(\"return\", result);\n\n              case 19:\n                result.status = server_data.status;\n\n              case 20:\n                _context4.next = 23;\n                break;\n\n              case 22:\n                result.status = \"Not implimented\";\n\n              case 23:\n                return _context4.abrupt(\"return\", result);\n\n              case 24:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function search_data_by_doi(_x4) {\n        return _search_data_by_doi.apply(this, arguments);\n      }\n\n      return search_data_by_doi;\n    }()\n  }]);\n\n  return Network;\n}();\n\nexport default Network;","import _classCallCheck from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport Manifest from './manifest.js';\nvar MANIFEST_PREFIX = \"/manifest/\";\nvar RAWDATA_PREFIX = \"/rawdata/\";\n\nvar Cache =\n/*#__PURE__*/\nfunction () {\n  function Cache() {\n    _classCallCheck(this, Cache);\n\n    this.innerStorage = new Map();\n  }\n\n  _createClass(Cache, [{\n    key: \"get_manifest_by_doi\",\n    value: function get_manifest_by_doi(doi) {\n      var result = {\n        status: \"Not found\",\n        data: null\n      };\n      var key = MANIFEST_PREFIX + doi;\n\n      try {\n        var _manifest = localStorage.getItem(key);\n\n        if (_manifest) {\n          result.status = \"ok\";\n          result.data = new Manifest(JSON.parse(_manifest));\n          return result;\n        }\n      } catch (error) {\n        console.log(\"get_manifest_by_doi, localStorage.getItem error: \" + error);\n      }\n\n      var manifest = this.innerStorage.get(key);\n\n      if (manifest) {\n        result.status = \"ok\";\n        result.data = new Manifest(JSON.parse(manifest));\n      }\n\n      return result;\n    }\n  }, {\n    key: \"set_manifest_by_doi\",\n    value: function set_manifest_by_doi(manifest, doi) {\n      var key = MANIFEST_PREFIX + doi;\n      var value = manifest.ToString();\n\n      try {\n        localStorage.setItem(key, value);\n        return;\n      } catch (error) {\n        console.log(\"set_manifest_by_doi, localStorage.setItem error: \" + error);\n      }\n\n      this.innerStorage.set(key, value);\n    }\n  }, {\n    key: \"delete_manifest_by_doi\",\n    value: function delete_manifest_by_doi(doi) {\n      var key = MANIFEST_PREFIX + doi;\n\n      try {\n        if (localStorage.getItem(key)) {\n          localStorage.removeItem(key);\n          return true;\n        }\n      } catch (error) {\n        console.log(\"delete_manifest_by_doi, localStorage error: \" + error);\n      }\n\n      return this.innerStorage.delete(key);\n    }\n  }, {\n    key: \"get_data_by_doi\",\n    value: function get_data_by_doi(doi) {\n      var result = {\n        status: \"Not found\",\n        data: null\n      };\n      var key = RAWDATA_PREFIX + doi;\n      var raw_data = null;\n\n      try {\n        raw_data = localStorage.getItem(key);\n      } catch (error) {\n        console.log(\"get_data_by_doi, localStorage.getItem error: \" + error);\n      }\n\n      if (!raw_data) raw_data = this.innerStorage.get(key);\n\n      if (raw_data) {\n        result.status = \"ok\";\n        var length = Math.ceil(raw_data.length / 2);\n        result.data = new Uint8Array(length);\n\n        for (var i = 0; i < length; i++) {\n          result.data[i] = parseInt(raw_data.substr(i * 2, 2), 16);\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"get_data_by_manifest\",\n    value: function get_data_by_manifest(manifest) {\n      var result = {\n        status: \"Not found\",\n        data: null\n      };\n      var dois = manifest.get_doi();\n\n      if (\"ok\" === dois.status) {\n        for (var doi in dois.data) {\n          var data = this.get_data_by_doi(dois.data[doi]).data;\n\n          if (data) {\n            result.status = \"ok\";\n            result.data = data;\n            return result;\n          }\n        }\n      } else result.status = \"Manifest has no doi\";\n\n      return result;\n    }\n  }, {\n    key: \"set_data_by_doi\",\n    value: function set_data_by_doi(data, doi) {\n      var key = RAWDATA_PREFIX + doi;\n      var value = \"\";\n      var array_data = new Uint8Array(data);\n\n      for (var i = 0; i < array_data.length; i++) {\n        value += array_data[i].toString(16).padStart(2, \"0\");\n      }\n\n      try {\n        localStorage.setItem(key, value);\n        return;\n      } catch (error) {\n        console.log(\"set_data_by_doi, localStorage.setItem error: \" + error);\n      }\n\n      this.innerStorage.set(key, value);\n    }\n  }, {\n    key: \"delete_data_by_doi\",\n    value: function delete_data_by_doi(doi) {\n      var key = RAWDATA_PREFIX + doi;\n\n      try {\n        if (localStorage.getItem(key)) {\n          localStorage.removeItem(key);\n          return true;\n        }\n      } catch (error) {\n        console.log(\"delete_data_by_doi, localStorage error: \" + error);\n      }\n\n      return this.innerStorage.delete(key);\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var cached_manifests = this.get_cached_manifests();\n\n      for (var i = 0; i < cached_manifests.length; i++) {\n        this.delete_manifest_by_doi(cached_manifests[i].doi);\n      }\n\n      var cached_data = this.get_cached_data();\n\n      for (var i = 0; i < cached_data.length; i++) {\n        this.delete_data_by_doi(cached_data[i].doi);\n      }\n\n      var size = cached_manifests.length + cached_data.length;\n      return 0 !== size ? true : false;\n    }\n  }, {\n    key: \"get_cached_manifests\",\n    value: function get_cached_manifests() {\n      var result = [];\n\n      try {\n        for (var i = 0; i < localStorage.length; i++) {\n          var _key = localStorage.key(i);\n\n          if (true === _key.startsWith(MANIFEST_PREFIX)) {\n            var doi = _key.replace(MANIFEST_PREFIX, \"\");\n\n            var manifest = this.get_manifest_by_doi(doi).data;\n            result.push({\n              doi: doi,\n              value: manifest\n            });\n          }\n        }\n      } catch (error) {\n        console.log(\"get_cached_manifests, localStorage error: \" + error);\n      }\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.innerStorage.keys()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var key = _step.value;\n\n          if (true === key.startsWith(MANIFEST_PREFIX)) {\n            var _doi = key.replace(MANIFEST_PREFIX, \"\");\n\n            var _manifest2 = this.get_manifest_by_doi(_doi).data;\n            result.push({\n              doi: _doi,\n              value: _manifest2\n            });\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"get_cached_manifests_size\",\n    value: function get_cached_manifests_size() {\n      var result = 0;\n\n      try {\n        for (var i = 0; i < localStorage.length; i++) {\n          var _key2 = localStorage.key(i);\n\n          if (true === _key2.startsWith(MANIFEST_PREFIX)) result++;\n        }\n      } catch (error) {\n        console.log(\"get_cached_manifests_size, localStorage error: \" + error);\n      }\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.innerStorage.keys()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var key = _step2.value;\n          if (true === key.startsWith(MANIFEST_PREFIX)) result++;\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"get_cached_data\",\n    value: function get_cached_data() {\n      var result = [];\n\n      try {\n        for (var i = 0; i < localStorage.length; i++) {\n          var _key3 = localStorage.key(i);\n\n          if (true === _key3.startsWith(RAWDATA_PREFIX)) {\n            var doi = _key3.replace(RAWDATA_PREFIX, \"\");\n\n            var data = this.get_data_by_doi(doi).data;\n            result.push({\n              doi: doi,\n              value: data\n            });\n          }\n        }\n      } catch (error) {\n        console.log(\"get_cached_data, localStorage error: \" + error);\n      }\n\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = this.innerStorage.keys()[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var key = _step3.value;\n\n          if (true === key.startsWith(RAWDATA_PREFIX)) {\n            var _doi2 = key.replace(RAWDATA_PREFIX, \"\");\n\n            var _data = this.get_data_by_doi(_doi2).data;\n            result.push({\n              doi: _doi2,\n              value: _data\n            });\n          }\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"get_cached_data_size\",\n    value: function get_cached_data_size() {\n      var result = 0;\n\n      try {\n        for (var i = 0; i < localStorage.length; i++) {\n          var _key4 = localStorage.key(i);\n\n          if (true === _key4.startsWith(RAWDATA_PREFIX)) result++;\n        }\n      } catch (error) {\n        console.log(\"get_cached_data_size, localStorage error: \" + error);\n      }\n\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = this.innerStorage.keys()[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var key = _step4.value;\n          if (true === key.startsWith(RAWDATA_PREFIX)) result++;\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      return result;\n    }\n  }]);\n\n  return Cache;\n}();\n\nexport default Cache;","import _regeneratorRuntime from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport Network from './network.js';\nimport Cache from './cache.js';\n\nvar Engine =\n/*#__PURE__*/\nfunction () {\n  function Engine(settings) {\n    _classCallCheck(this, Engine);\n\n    this.Cache = new Cache();\n\n    if (settings.hasOwnProperty(\"Network\")) {\n      this.Network = new Network(settings[\"Network\"], this.Cache);\n      return;\n    }\n\n    throw new Error(\"Bad engine settings\");\n  }\n\n  _createClass(Engine, [{\n    key: \"network\",\n    value: function network() {\n      return this.Network;\n    }\n  }, {\n    key: \"cache\",\n    value: function cache() {\n      return this.Cache;\n    }\n  }, {\n    key: \"eval_manifest\",\n    value: function () {\n      var _eval_manifest = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(manifest) {\n        var result, raw_value, data, formulas, i, _data;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  data: []\n                };\n                raw_value = manifest.get_raw_value();\n\n                if (!(\"ok\" === raw_value.status)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.data = raw_value.data;\n                return _context.abrupt(\"return\", result);\n\n              case 6:\n                _context.next = 8;\n                return this.Network.search_data(manifest);\n\n              case 8:\n                data = _context.sent;\n\n                if (!(\"ok\" === data.status)) {\n                  _context.next = 13;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.data = data.data;\n                return _context.abrupt(\"return\", result);\n\n              case 13:\n                formulas = manifest.get_formulas();\n\n                if (!(0 === formulas.data.length)) {\n                  _context.next = 23;\n                  break;\n                }\n\n                result.status = \"Manifest has no formulas\";\n                _context.next = 18;\n                return this.Network.search_manifest(manifest);\n\n              case 18:\n                manifest = _context.sent;\n\n                if (!(\"ok\" !== manifest.status)) {\n                  _context.next = 22;\n                  break;\n                }\n\n                result.status = manifest.status;\n                return _context.abrupt(\"return\", result);\n\n              case 22:\n                formulas = manifest.data.get_formulas();\n\n              case 23:\n                _context.t0 = _regeneratorRuntime.keys(formulas.data);\n\n              case 24:\n                if ((_context.t1 = _context.t0()).done) {\n                  _context.next = 36;\n                  break;\n                }\n\n                i = _context.t1.value;\n                _context.next = 28;\n                return this.eval_formula(formulas.data[i]);\n\n              case 28:\n                _data = _context.sent;\n\n                if (!(\"ok\" === _data.status)) {\n                  _context.next = 33;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.data = _data.data;\n                return _context.abrupt(\"return\", result);\n\n              case 33:\n                result.status = _data.status;\n                _context.next = 24;\n                break;\n\n              case 36:\n                return _context.abrupt(\"return\", result);\n\n              case 37:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function eval_manifest(_x) {\n        return _eval_manifest.apply(this, arguments);\n      }\n\n      return eval_manifest;\n    }()\n  }, {\n    key: \"eval_formula\",\n    value: function () {\n      var _eval_formula = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(formula) {\n        var result, dependencies, i, dep_data, data;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  data: []\n                };\n                dependencies = formula.get_dependencies();\n\n                if (!(\"ok\" === dependencies.status)) {\n                  _context2.next = 20;\n                  break;\n                }\n\n                _context2.t0 = _regeneratorRuntime.keys(dependencies.data);\n\n              case 4:\n                if ((_context2.t1 = _context2.t0()).done) {\n                  _context2.next = 18;\n                  break;\n                }\n\n                i = _context2.t1.value;\n                _context2.next = 8;\n                return this.Network.search_data(dependencies.data[i]);\n\n              case 8:\n                dep_data = _context2.sent;\n\n                if (!(\"ok\" !== dep_data.status)) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                _context2.next = 12;\n                return this.eval_manifest(dependencies.data[i]);\n\n              case 12:\n                data = _context2.sent;\n\n                if (!(\"ok\" !== data.status)) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                result.status = data.status;\n                return _context2.abrupt(\"return\", result);\n\n              case 16:\n                _context2.next = 4;\n                break;\n\n              case 18:\n                _context2.next = 22;\n                break;\n\n              case 20:\n                result.status = \"Formula has no dependencies\";\n                return _context2.abrupt(\"return\", result);\n\n              case 22:\n                _context2.next = 24;\n                return this.eval(formula);\n\n              case 24:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 25:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function eval_formula(_x2) {\n        return _eval_formula.apply(this, arguments);\n      }\n\n      return eval_formula;\n    }()\n  }, {\n    key: \"eval\",\n    value: function () {\n      var _eval2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(formula) {\n        var result, doi_data_formula, dois, doi, cached_data, dependencies_data, dependencies, dependency_manifest, manifest, manifest_data, raw_value, eval_result;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  source: null,\n                  data: []\n                };\n                doi_data_formula = null;\n\n                if (!formula.manifest) {\n                  _context3.next = 17;\n                  break;\n                }\n\n                dois = formula.manifest.get_doi();\n\n                if (!(\"ok\" === dois.status)) {\n                  _context3.next = 17;\n                  break;\n                }\n\n                _context3.t0 = _regeneratorRuntime.keys(dois.data);\n\n              case 6:\n                if ((_context3.t1 = _context3.t0()).done) {\n                  _context3.next = 17;\n                  break;\n                }\n\n                doi = _context3.t1.value;\n                doi_data_formula = dois.data[doi];\n                cached_data = this.Cache.get_data_by_doi(doi_data_formula);\n\n                if (!(\"ok\" === cached_data.status)) {\n                  _context3.next = 15;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.source = \"Cache\";\n                result.data = cached_data.data;\n                return _context3.abrupt(\"return\", result);\n\n              case 15:\n                _context3.next = 6;\n                break;\n\n              case 17:\n                dependencies_data = new Map();\n                dependencies = formula.get_dependencies();\n\n                if (!(\"ok\" === dependencies.status)) {\n                  _context3.next = 42;\n                  break;\n                }\n\n                _context3.t2 = _regeneratorRuntime.keys(dependencies.data);\n\n              case 21:\n                if ((_context3.t3 = _context3.t2()).done) {\n                  _context3.next = 40;\n                  break;\n                }\n\n                dependency_manifest = _context3.t3.value;\n                manifest = dependencies.data[dependency_manifest];\n                _context3.next = 26;\n                return this.Cache.get_data_by_manifest(manifest);\n\n              case 26:\n                manifest_data = _context3.sent;\n\n                if (!(\"ok\" === manifest_data.status)) {\n                  _context3.next = 31;\n                  break;\n                }\n\n                dependencies_data.set(manifest.ArgName, manifest_data.data);\n                _context3.next = 38;\n                break;\n\n              case 31:\n                raw_value = manifest.get_raw_value();\n\n                if (!(\"ok\" === raw_value.status)) {\n                  _context3.next = 36;\n                  break;\n                }\n\n                dependencies_data.set(manifest.ArgName, raw_value.data);\n                _context3.next = 38;\n                break;\n\n              case 36:\n                result.status = \"Cache has no data for dependency: \" + manifest.ArgName;\n                return _context3.abrupt(\"return\", result);\n\n              case 38:\n                _context3.next = 21;\n                break;\n\n              case 40:\n                _context3.next = 44;\n                break;\n\n              case 42:\n                result.status = \"Formula has no dependencies\";\n                return _context3.abrupt(\"return\", result);\n\n              case 44:\n                _context3.next = 46;\n                return formula.eval(dependencies_data);\n\n              case 46:\n                eval_result = _context3.sent;\n\n                if (\"ok\" === eval_result.status) {\n                  //TODO: let check_result = formula.manifest.check_data(eval_result.data);\n                  result.status = \"ok\";\n                  result.source = \"Evaluation\";\n                  result.data = eval_result.data;\n                  if (doi_data_formula) this.Cache.set_data_by_doi(eval_result.data, doi_data_formula);\n                } else result.status = \"Error evaluation formula (\" + eval_result.status + \")\";\n\n                return _context3.abrupt(\"return\", result);\n\n              case 49:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function _eval(_x3) {\n        return _eval2.apply(this, arguments);\n      }\n\n      return _eval;\n    }()\n  }]);\n\n  return Engine;\n}();\n\nexport default Engine;","import Engine from '../../scripts/engine.js'\nimport Manifest from '../../scripts/manifest.js'\n\nclass KolmoApplication\n{\n    constructor(dedicated_server_address)\n    {\n        let options = {\n            Network: {\n                DedicatedServer: dedicated_server_address\n            }\n        };\n\n        this.engine = new Engine(options)\n\n        this.update_manifest = null;\n        this.update_data_view = null;\n\n        this.current_manifest = null;\n        this.current_manifest_status = \"Not defined\";\n\n        this.manifest_focus_list = []\n    }\n\n    setUpdateManifest(update_manifest){\n        this.update_manifest = update_manifest\n    }\n\n    setUpdateDataView(update_data_view){\n        this.update_data_view = update_data_view\n    }\n\n    updateDataView(data)\n    {\n        if (null != this.update_data_view)\n            this.update_data_view(data)\n    }\n\n    getCache() {\n        return this.engine.cache()\n    }\n\n    getNetwork() {\n        return this.engine.network()\n    }\n\n    getCurrentManifest()\n    {\n        let result = {\n            status: \"ok\",\n            data: null\n        };\n\n        result.data = this.current_manifest;\n        result.status = this.current_manifest_status;\n\n        return result\n    }\n\n    setNewManifest(str_manifest)\n    {\n        if (null == str_manifest)\n        {\n            this.current_manifest = null;\n            this.current_manifest_status = \"Not defined\";\n\n            this.update_manifest();\n\n            return\n        }\n\n        this.manifest_focus_list = []\n\n        this.current_manifest = null;\n        this.current_manifest_status = \"Not defined\";\n\n        try\n        {\n            this.current_manifest = new Manifest(JSON.parse(str_manifest));\n            this.current_manifest_status = \"ok\";\n        }\n        catch(error)\n        {\n            this.current_manifest_status = \"Error creating manifest: \" + error\n        }\n\n        if (null !== this.update_manifest)\n            this.update_manifest();\n    }\n\n    PushManifestFocusList(manifest)\n    {\n        if (0 === this.manifest_focus_list.length)\n            this.manifest_focus_list.push({ data:this.current_manifest, status:this.current_manifest_status })\n        \n        this.manifest_focus_list.push({ data:manifest.data, status:manifest.status })\n\n        this.current_manifest = manifest.data;\n        this.current_manifest_status = manifest.status;\n\n        if (null !== this.update_manifest)\n            this.update_manifest();\n    }\n\n    PopManifestFocusList()\n    {\n        let manifest = this.manifest_focus_list.pop()\n\n        if (null != manifest)\n        {\n            manifest = this.manifest_focus_list.pop()\n\n            if (null != manifest)\n            {\n                this.current_manifest = manifest.data;\n                this.current_manifest_status = manifest.status;\n\n                if (null !== this.update_manifest)\n                    this.update_manifest();\n            }\n        }\n    }\n\n    ManifestFocusListIsEmpty(){\n        return (0 === this.manifest_focus_list.length) ? true : false\n    }\n}\n\nexport default KolmoApplication;\n","import _regeneratorRuntime from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nvar Wasm =\n/*#__PURE__*/\nfunction () {\n  function Wasm(raw_wasm, jsglue) {\n    _classCallCheck(this, Wasm);\n\n    this.raw_wasm = raw_wasm;\n    this.jsglue = jsglue;\n    this.wasm = null;\n    this.wasm_memory = null;\n  }\n\n  _createClass(Wasm, [{\n    key: \"un_init\",\n    value: function () {\n      var _un_init = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var result;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                result = {\n                  status: \"ok\"\n                };\n                return _context.abrupt(\"return\", result);\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function un_init() {\n        return _un_init.apply(this, arguments);\n      }\n\n      return un_init;\n    }()\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var _this = this;\n\n        var result, wasmModule, wasm, utf8decoder, jsglue, Module;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                result = {\n                  status: \"ok\"\n                };\n                _context2.prev = 1;\n\n                if (!(null === this.wasm)) {\n                  _context2.next = 20;\n                  break;\n                }\n\n                if (!(null === this.jsglue)) {\n                  _context2.next = 14;\n                  break;\n                }\n\n                _context2.next = 6;\n                return new WebAssembly.compile(this.raw_wasm);\n\n              case 6:\n                wasmModule = _context2.sent;\n                _context2.next = 9;\n                return new WebAssembly.instantiate(wasmModule, []);\n\n              case 9:\n                wasm = _context2.sent;\n                this.wasm = wasm.exports;\n                this.wasm_memory = this.wasm.memory;\n                _context2.next = 20;\n                break;\n\n              case 14:\n                utf8decoder = new TextDecoder();\n                jsglue = utf8decoder.decode(this.jsglue);\n                Module = Function('\"use strict\";' + jsglue + 'return Module;')();\n                _context2.next = 19;\n                return new Promise(function (resolve, reject) {\n                  function onRuntimeInitialized() {\n                    resolve(\"onRuntimeInitialized\");\n                  }\n\n                  _this.wasm = new Module({\n                    wasmBinary: _this.raw_wasm,\n                    onRuntimeInitialized: onRuntimeInitialized\n                  });\n                });\n\n              case 19:\n                this.wasm_memory = this.wasm.wasmMemory;\n\n              case 20:\n                _context2.next = 25;\n                break;\n\n              case 22:\n                _context2.prev = 22;\n                _context2.t0 = _context2[\"catch\"](1);\n                result.status = this.create_error(\"Exception while init: \" + _context2.t0);\n\n              case 25:\n                return _context2.abrupt(\"return\", result);\n\n              case 26:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[1, 22]]);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"exec\",\n    value: function () {\n      var _exec = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(args) {\n        var result, init_res, arg, arg_index, arg_name_buffer, size, pointer, pWasmData, i, argSize, argPointer, pWasmArgData, j, resSize, resPointer, result_data, pResultData, k;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  data: []\n                };\n                _context3.prev = 1;\n                _context3.next = 4;\n                return this.init();\n\n              case 4:\n                init_res = _context3.sent;\n\n                if (!(\"ok\" === init_res.status)) {\n                  _context3.next = 44;\n                  break;\n                }\n\n                _context3.t0 = _regeneratorRuntime.keys(args);\n\n              case 7:\n                if ((_context3.t1 = _context3.t0()).done) {\n                  _context3.next = 41;\n                  break;\n                }\n\n                arg = _context3.t1.value;\n\n                if (!(null == args[arg])) {\n                  _context3.next = 12;\n                  break;\n                }\n\n                result.status = this.create_error(\"Wrong usage, one of arguments is empty\");\n                return _context3.abrupt(\"return\", result);\n\n              case 12:\n                // lets findout argument index by name\n                arg_index = 0;\n\n                if (args[arg].hasOwnProperty(\"ArgName\")) {\n                  _context3.next = 16;\n                  break;\n                }\n\n                result.status = this.create_error(\"Wrong usage, one of arguments has no 'ArgName' property\");\n                return _context3.abrupt(\"return\", result);\n\n              case 16:\n                arg_name_buffer = new Uint8Array(Buffer.from(args[arg][\"ArgName\"]));\n                size = arg_name_buffer.length;\n                pointer = this.wasm._set_arg_name(arg, arg_name_buffer.length);\n\n                if (!(0 !== pointer)) {\n                  _context3.next = 28;\n                  break;\n                }\n\n                pWasmData = new Uint8ClampedArray(this.wasm_memory.buffer, pointer, size);\n\n                for (i = 0; i < pWasmData.length; i++) {\n                  pWasmData[i] = arg_name_buffer[i];\n                }\n\n                arg_index = this.wasm._get_arg_index(arg);\n\n                if (!(0 === arg_index)) {\n                  _context3.next = 26;\n                  break;\n                }\n\n                result.status = this.create_last_error();\n                return _context3.abrupt(\"return\", result);\n\n              case 26:\n                _context3.next = 30;\n                break;\n\n              case 28:\n                result.status = this.create_last_error();\n                return _context3.abrupt(\"return\", result);\n\n              case 30:\n                // set arg data to Wasm\n                argSize = args[arg].length;\n                argPointer = this.wasm._set_arg(arg_index, argSize);\n\n                if (!(0 !== argPointer)) {\n                  _context3.next = 37;\n                  break;\n                }\n\n                pWasmArgData = new Uint8ClampedArray(this.wasm_memory.buffer, argPointer, argSize);\n\n                for (j = 0; j < pWasmArgData.length; j++) {\n                  pWasmArgData[j] = args[arg][j];\n                }\n\n                _context3.next = 39;\n                break;\n\n              case 37:\n                result.status = this.create_last_error();\n                return _context3.abrupt(\"return\", result);\n\n              case 39:\n                _context3.next = 7;\n                break;\n\n              case 41:\n                // exec alg in wasm\n                if (this.wasm._exec()) {\n                  // get result\n                  resSize = this.wasm._get_result_size();\n                  resPointer = this.wasm._get_result();\n\n                  if (0 !== resPointer) {\n                    result_data = [];\n                    pResultData = new Uint8ClampedArray(this.wasm_memory.buffer, resPointer, resSize);\n\n                    for (k = 0; k < pResultData.length; k++) {\n                      result_data.push(pResultData[k]);\n                    } // TODO:\n                    // result[\"MIME\"] = this.wasm._get_result_type();\n\n\n                    result.status = \"ok\";\n                    result.data = result_data;\n                  } else result.status = this.create_last_error();\n                } else result.status = this.create_last_error();\n\n                _context3.next = 45;\n                break;\n\n              case 44:\n                result.status = this.create_error(\"Init error: \" + init_res.status);\n\n              case 45:\n                _context3.next = 50;\n                break;\n\n              case 47:\n                _context3.prev = 47;\n                _context3.t2 = _context3[\"catch\"](1);\n                result.status = this.create_error(\"Exception while exec: \" + _context3.t2);\n\n              case 50:\n                return _context3.abrupt(\"return\", result);\n\n              case 51:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[1, 47]]);\n      }));\n\n      function exec(_x) {\n        return _exec.apply(this, arguments);\n      }\n\n      return exec;\n    }()\n  }, {\n    key: \"create_error\",\n    value: function create_error(text) {\n      return text;\n    }\n  }, {\n    key: \"create_last_error\",\n    value: function create_last_error() {\n      var error = [];\n\n      var pointer = this.wasm._get_last_error();\n\n      var size = this.wasm._get_last_error_size();\n\n      var pWasmData = new Uint8ClampedArray(this.wasm_memory.buffer, pointer, size);\n\n      for (var i = 0; i < pWasmData.length; i++) {\n        error.push(pWasmData[i]);\n      }\n\n      var utf8decoder = new TextDecoder();\n      return this.create_error(utf8decoder.decode(error));\n    }\n  }]);\n\n  return Wasm;\n}();\n\nexport default Wasm;","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport KolmoApplication from '../KolmoApplication.js';\nimport DataViewer from './DataViewer';\nimport Manifest from '../../../scripts/manifest.js';\n\n\nclass ViewButton extends Component {\n\n    constructor(props) \n    {\n        super(props)\n\n        this.state = {\n            textAreaID: props.textAreaID,\n            manifestDataHolderID: props.manifestDataHolderID,\n            viewerIsShown: false,\n            showData: false,\n            \n            \n        }\n\n        this.actionClick = this.actionClick.bind(this)\n    }\n    \n    \n\n    actionClick(event)\n    {\n        ReactDOM.unmountComponentAtNode(document.getElementById(this.state.manifestDataHolderID));\n\n        let btn_caption = event.target.innerHTML;\n\n        event.target.innerHTML = \"evaluating...\";\n\n        this.setState({ viewerIsShown : !this.state.viewerIsShown}); \n       \n        \n        let application = new KolmoApplication(process.env.REACT_APP_DEDICATED_SERVER_ADDRESS);\n\n        let data_to_view = { MIME:\"\", data:\"\" };\n\n        let manifest = null;\n\n        try\n        {\n            let manifestText = document.getElementById(this.state.textAreaID).value\n            \n            manifest = new Manifest(JSON.parse(manifestText))\n        }\n        catch(error)\n        {\n            data_to_view.MIME = \"text\"\n            data_to_view.data = new Uint8Array(Buffer.from(\"\"+error))\n        }\n\n        if (null == manifest)\n        {\n            ReactDOM.render(<DataViewer viewerIsShown={this.state.viewerIsShown} showData={this.state.showData} data={data_to_view}/>, document.getElementById(this.state.manifestDataHolderID));\n\n            event.target.innerHTML = btn_caption;\n\n            return;\n        }\n\n        manifest.target = event.target\n        manifest.btn_caption = btn_caption\n\n        application.engine.eval_manifest(manifest).then(data =>{\n        \n            manifest.target.innerHTML = manifest.btn_caption\n\n            if (data.data.MIME)\n                data_to_view.MIME = data.data.MIME\n            else\n                data_to_view.MIME = \"text\"\n\n            data_to_view.data = data.data\n\n            ReactDOM.render( <DataViewer viewerIsShown={this.state.viewerIsShown} showData={this.state.showData} data={data_to_view}/>, document.getElementById(this.state.manifestDataHolderID));\n        })\n        \n    }\n\n    render() {\n        return (\n            <button className=\"btn btn-sm btn-warning m-2 float-center\" onClick={this.actionClick}>View Data</button>\n        )\n    }\n}\n\nexport default ViewButton;","import _regeneratorRuntime from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nvar WasmGo =\n/*#__PURE__*/\nfunction () {\n  function WasmGo(raw_wasm, jsglue_go) {\n    _classCallCheck(this, WasmGo);\n\n    this.raw_wasm = raw_wasm;\n    this.jsglue_go = jsglue_go;\n    this.mod = null;\n    this.inst = null;\n    this.Go = null;\n    if (!this.raw_wasm) throw new Error(\"Not specified raw_wasm object!\");\n    if (!this.jsglue_go) throw new Error(\"Not specified jsglue_go object!\");\n  }\n\n  _createClass(WasmGo, [{\n    key: \"un_init\",\n    value: function () {\n      var _un_init = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var result;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                result = {\n                  status: \"ok\"\n                };\n\n                try {// TODO: if make call _gowasm_stop(); after 10 seconds will exception...\n                  //_gowasm_stop();\n                } catch (error) {\n                  result.status = \"Exception while un_init: \" + error;\n                }\n\n                return _context.abrupt(\"return\", result);\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function un_init() {\n        return _un_init.apply(this, arguments);\n      }\n\n      return un_init;\n    }()\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var result, utf8decoder, jsglue_go;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                result = {\n                  status: \"ok\"\n                };\n                _context2.prev = 1;\n\n                if (this.inst) {\n                  _context2.next = 13;\n                  break;\n                }\n\n                utf8decoder = new TextDecoder();\n                jsglue_go = utf8decoder.decode(this.jsglue_go);\n                this.Go = Function('\"use strict\";' + jsglue_go + 'return new Go();')();\n                _context2.next = 8;\n                return new WebAssembly.compile(this.raw_wasm);\n\n              case 8:\n                this.mod = _context2.sent;\n                _context2.next = 11;\n                return new WebAssembly.instantiate(this.mod, this.Go.importObject);\n\n              case 11:\n                this.inst = _context2.sent;\n                this.Go.run(this.inst).then(function (resutl) {\n                  console.log(\"end run\");\n                });\n\n              case 13:\n                _context2.next = 18;\n                break;\n\n              case 15:\n                _context2.prev = 15;\n                _context2.t0 = _context2[\"catch\"](1);\n                result.status = \"Exception while init: \" + _context2.t0;\n\n              case 18:\n                return _context2.abrupt(\"return\", result);\n\n              case 19:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[1, 15]]);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"exec\",\n    value: function () {\n      var _exec = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(args) {\n        var result, arg, res;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                result = {\n                  status: \"Not implemented\",\n                  data: []\n                };\n                _context3.prev = 1;\n                _context3.t0 = _regeneratorRuntime.keys(args);\n\n              case 3:\n                if ((_context3.t1 = _context3.t0()).done) {\n                  _context3.next = 16;\n                  break;\n                }\n\n                arg = _context3.t1.value;\n\n                if (!(null == args[arg])) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                result.status = \"Wrong usage, one of arguments is empty\";\n                return _context3.abrupt(\"return\", result);\n\n              case 8:\n                if (args[arg].hasOwnProperty(\"ArgName\")) {\n                  _context3.next = 11;\n                  break;\n                }\n\n                result.status = \"Wrong usage, one of arguments has no 'ArgName' property\";\n                return _context3.abrupt(\"return\", result);\n\n              case 11:\n                if (_gowasm_setArg(args[arg][\"ArgName\"], args[arg])) {\n                  _context3.next = 14;\n                  break;\n                }\n\n                result.status = _gowasm_lastError();\n                return _context3.abrupt(\"return\", result);\n\n              case 14:\n                _context3.next = 3;\n                break;\n\n              case 16:\n                _context3.next = 21;\n                break;\n\n              case 18:\n                _context3.prev = 18;\n                _context3.t2 = _context3[\"catch\"](1);\n                result.status = \"Exception while setArg: \" + _context3.t2;\n\n              case 21:\n                _context3.prev = 21;\n                res = _gowasm_execute();\n\n                if (!res) {\n                  _context3.next = 28;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.data = res;\n                _context3.next = 30;\n                break;\n\n              case 28:\n                result.status = _gowasm_lastError();\n                return _context3.abrupt(\"return\", result);\n\n              case 30:\n                _context3.next = 35;\n                break;\n\n              case 32:\n                _context3.prev = 32;\n                _context3.t3 = _context3[\"catch\"](21);\n                result.status = \"Exception while execute: \" + _context3.t3;\n\n              case 35:\n                return _context3.abrupt(\"return\", result);\n\n              case 36:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[1, 18], [21, 32]]);\n      }));\n\n      function exec(_x) {\n        return _exec.apply(this, arguments);\n      }\n\n      return exec;\n    }()\n  }]);\n\n  return WasmGo;\n}();\n\nexport default WasmGo;","import _regeneratorRuntime from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/waterlooit/Desktop/Kolmo/kolmonet/app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport Manifest from './manifest.js';\nimport Wasm from './wasm.js';\nimport WasmGo from './wasm_go.js';\n\nvar Formula =\n/*#__PURE__*/\nfunction () {\n  function Formula(json, manifest) {\n    _classCallCheck(this, Formula);\n\n    this.json = json;\n    this.manifest = manifest;\n    this.wasm = null;\n    this.jsglue = null;\n    this.jsglue_go = null;\n    this.parameters = []; // validate actor\n\n    if (!this.json.hasOwnProperty(\"actor\")) throw new Error(\"Not found required property actor\");\n    if (!this.json.actor.hasOwnProperty(\"wasm\")) throw new Error(\"Not found required property actor.wasm\");\n    this.wasm = new Manifest(this.json.actor.wasm);\n    this.wasm.ArgName = \"actor.wasm\";\n\n    if (this.json.actor.hasOwnProperty(\"jsglue\")) {\n      this.jsglue = new Manifest(this.json.actor.jsglue);\n      this.jsglue.ArgName = \"actor.jsglue\";\n    }\n\n    if (this.json.actor.hasOwnProperty(\"jsglue_go\")) {\n      this.jsglue_go = new Manifest(this.json.actor.jsglue_go);\n      this.jsglue_go.ArgName = \"actor.jsglue_go\";\n    } // validate parameters\n\n\n    if (!this.json.hasOwnProperty(\"parameters\")) throw new Error(\"Not found required property parameters\");\n\n    for (var parameter in this.json.parameters) {\n      var param = new Manifest(this.json.parameters[parameter]);\n      param.ArgName = parameter;\n      this.parameters.push(param);\n    }\n\n    ;\n  }\n\n  _createClass(Formula, [{\n    key: \"get_dependencies\",\n    value: function get_dependencies() {\n      var result = {\n        status: \"ok\",\n        data: []\n      };\n      result.data.push(this.wasm);\n      if (this.jsglue) result.data.push(this.jsglue);\n      if (this.jsglue_go) result.data.push(this.jsglue_go);\n      this.parameters.forEach(function (parameter) {\n        result.data.push(parameter);\n      });\n      return result;\n    }\n  }, {\n    key: \"eval\",\n    value: function () {\n      var _eval2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dependencies_data) {\n        var result, wasm, jsglue, jsglue_go, args, parameter, ArgName, arg, wasm_wrapper, mime;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  data: []\n                };\n                wasm = dependencies_data.get(\"actor.wasm\");\n\n                if (!(null === wasm)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                result.status = \"Evaluation failed, has no actor.wasm data\";\n                return _context.abrupt(\"return\", result);\n\n              case 5:\n                jsglue = null;\n                jsglue_go = null;\n\n                if (!this.jsglue) {\n                  _context.next = 12;\n                  break;\n                }\n\n                jsglue = dependencies_data.get(\"actor.jsglue\");\n\n                if (!(null == jsglue)) {\n                  _context.next = 12;\n                  break;\n                }\n\n                result.status = \"Evaluation failed, has no actor.jsglue data\";\n                return _context.abrupt(\"return\", result);\n\n              case 12:\n                if (!this.jsglue_go) {\n                  _context.next = 17;\n                  break;\n                }\n\n                jsglue_go = dependencies_data.get(\"actor.jsglue_go\");\n\n                if (!(null == jsglue_go)) {\n                  _context.next = 17;\n                  break;\n                }\n\n                result.status = \"Evaluation failed, has no actor.jsglue_go data\";\n                return _context.abrupt(\"return\", result);\n\n              case 17:\n                args = [];\n                _context.t0 = _regeneratorRuntime.keys(this.parameters);\n\n              case 19:\n                if ((_context.t1 = _context.t0()).done) {\n                  _context.next = 30;\n                  break;\n                }\n\n                parameter = _context.t1.value;\n                ArgName = this.parameters[parameter].ArgName;\n                arg = dependencies_data.get(ArgName);\n\n                if (!(null == arg)) {\n                  _context.next = 26;\n                  break;\n                }\n\n                result.status = \"Evaluation failed, has no \" + ArgName + \" data\";\n                return _context.abrupt(\"return\", result);\n\n              case 26:\n                arg.ArgName = ArgName;\n                args.push(arg);\n                _context.next = 19;\n                break;\n\n              case 30:\n                wasm_wrapper = null;\n                if (jsglue_go) wasm_wrapper = new WasmGo(wasm, jsglue_go);else wasm_wrapper = new Wasm(wasm, jsglue);\n                _context.next = 34;\n                return wasm_wrapper.init();\n\n              case 34:\n                result = _context.sent;\n\n                if (!(\"ok\" === result.status)) {\n                  _context.next = 40;\n                  break;\n                }\n\n                _context.next = 38;\n                return wasm_wrapper.exec(args);\n\n              case 38:\n                result = _context.sent;\n\n                if (\"ok\" === result.status) {\n                  if (this.manifest) {\n                    mime = this.manifest.get_mime();\n                    if (\"ok\" === mime.status) result.data.MIME = mime.data;\n                  }\n                }\n\n              case 40:\n                _context.next = 42;\n                return wasm_wrapper.un_init();\n\n              case 42:\n                return _context.abrupt(\"return\", result);\n\n              case 43:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function _eval(_x) {\n        return _eval2.apply(this, arguments);\n      }\n\n      return _eval;\n    }()\n  }]);\n\n  return Formula;\n}();\n\nexport default Formula;","import React, { Component } from 'react';\n\nconst startCount = 10\nconst finishCount = 10\n\nclass Cache extends Component {\n\n    constructor(props) \n    {\n        super(props)\n\n        this.state = {\n            cache: props.cache,\n            updateApp: props.updateApp,\n            application: props.application,\n            showData: props.showData,\n            \n        }\n\n        this.handleCacheOper = this.handleCacheOper.bind(this)\n        this.handleDataView = this.handleDataView.bind(this)\n        this.handleDataDownload = this.handleDataDownload.bind(this)\n        this.handleManifestView = this.handleManifestView.bind(this)\n\n    }\n    \n\n    handleCacheOper(event)\n    {\n        if (this.state.cache[event.target.name](event.target.value))\n            this.state.updateApp()\n           \n\n    }\n\n\n    strDigest(data)\n    {\n        let str = data\n        \n        if (typeof data !== 'string')\n            str = new Uint8Array(data).toString()\n        \n        if ( str.length > (startCount + finishCount) )\n            return str.substr(0, startCount) + \"...\" + str.substr((str.length - finishCount), finishCount)\n        else\n            return str\n    }\n\n\n    viewManifestButton(doi) {\n        return <button className=\"btn btn-sm btn-success \" onClick={this.handleManifestView} value={doi}>View Manifest</button>\n        \n    }\n\n\n    handleManifestView(event)\n    {\n\n        let manifest = this.state.cache.get_manifest_by_doi(event.target.value);\n        this.state.application.updateDataView({MIME : \"manifest\", data : manifest.data});\n        this.props.dataTogglePopup();\n\n        \n    }\n\n\n    viewDataButton(doi)\n    {\n\n        let manifest = this.state.cache.get_manifest_by_doi(doi);\n        let data = this.state.cache.get_data_by_doi(doi);\n        \n        if (manifest.status && data.status && manifest.data !== null) \n\n            return <button className=\"btn btn-sm btn-success\" onClick={this.handleDataView} value={doi}>View Data</button>\n        else\n            return \"\"\n    };\n\n\n    \n    handleDataView(event)\n    {\n\n        let manifest = this.state.cache.get_manifest_by_doi(event.target.value);\n        let data = this.state.cache.get_data_by_doi(event.target.value);\n\n         this.state.application.updateDataView({MIME : manifest.data.get_mime().data, data : data.data});\n         this.props.dataTogglePopup();\n         //console.log(this.props.showData);\n      \n        \n\n        \n    }\n\n\n    DataDownloadButton(doi)\n    {\n        let manifest = this.state.cache.get_manifest_by_doi(doi);\n        let data = this.state.cache.get_data_by_doi(doi);\n\n        if ((\"ok\" === data.status) && (\"ok\" === manifest.status))\n            return <button className=\"btn btn-sm btn-success\"  onClick={this.handleDataDownload} value={doi}>Download</button>\n        else\n            return \"\"\n    };\n\n    handleDataDownload(event)\n    {\n        let manifest = this.state.cache.get_manifest_by_doi(event.target.value);\n        \n        let mime = manifest.data.get_mime()\n        if (\"ok\" !== mime.status)\n            return\n        \n        let doi = manifest.data.get_doi()\n        if (\"ok\" !== doi.status)\n            return\n\n        let ext = \"\"\n        if ( mime.data === \"application/vnd.openxmlformats-officedocument.presentationml.presentation\" )\n            ext = \".pptx\"\n\n        if ( mime.data === \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\" )\n            ext = \".docx\"\n\n        if ( mime.data === \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" )\n            ext = \".xlsx\"\n\n        let data = this.state.cache.get_data_by_doi(event.target.value);    \n\n        var blob = new Blob([data.data], {type: mime.data});\n        var link = document.createElement('a');\n        link.href = window.URL.createObjectURL(blob);\n        link.download = doi.data[0] + ext;\n\n        link.click();\n    }\n\n\n    render()\n    {\n        let cache = this.state.cache\n\n        let cm = cache.get_cached_manifests()\n        let cd = cache.get_cached_data()\n        const col6 = \"col-md-6 alert alert-success alert-dismissible fade show\"\n        \n        let cachedManifests = cm.map(value => \n        <div className=\"row\">\n        <div className={col6} title={value.doi}> {this.strDigest(value.doi)}</div>\n        <div className={col6}>{this.strDigest(JSON.stringify(value.value))}</div>\n        \n        <div className=\"col-md-6\" >{this.viewManifestButton(value.doi)}</div>\n        <div className=\"col-md-6\"><button className=\"btn btn-sm btn-danger\" onClick={this.handleCacheOper} name=\"delete_manifest_by_doi\" value={value.doi}>Delete</button>\n        </div>\n        <div className=\"col-md-12 p-2\"></div></div>)\n        let cachedData = cd.map(value => \n            <div className=\"row\">\n            <div className={col6} title={value.doi}>{this.strDigest(value.doi)}</div>\n            <div className={col6}>{this.strDigest(value.value)} Data length = {value.value.length}</div>\n            \n            \n            <div className=\"col-md-6\" >{this.viewDataButton(value.doi)}{this.DataDownloadButton(value.doi)}</div>\n            <div className=\"col-md-6\"><button className=\"btn btn-sm btn-danger\" onClick={this.handleCacheOper} name=\"delete_data_by_doi\"\n             value={value.doi}>Delete</button></div></div>\n             )\n\n        return (\n               \n                <div className=\"Cache col-lg-12 bg-secondary m-2 text-white\" /*style={{display: cache.get_cached_manifests_size() || cache.get_cached_data_size() !== 0 ? 'block' : 'none'}}*/>\n                \n                    \n                    <div className=\"col-md-12 font-weight-bold\"> CACHE </div>\n                    \n                    <div className=\"row m-2\">\n                    <div className=\"col-md-6 text-md-left font-weight-bold p-1\">Entity type</div>\n                    <div className=\"col-md-6 text-md-right font-weight-bold p-1\">Count</div>\n                    <div className=\"col-md-12 border-bottom\"></div>\n                    </div>\n                    \n                    <div className=\"row m-2\">\n                    <div className=\"col-md-11 text-md-left p-1\">Manifest</div>\n                    <div className=\"col-md-1 alert alert-success alert-dismissible fade show p-1\">{cache.get_cached_manifests_size()}</div>\n                    </div>\n                    <div className=\"row m-2\">\n                    <div className=\"col-md-11 text-md-left p-1\">Data</div>\n                    <div className=\"col-md-1  alert alert-success alert-dismissible fade show p-1\" >{cache.get_cached_data_size()}</div>\n                   </div>\n                    <div className=\"col-md-12 border-bottom\"></div>\n                    <div className=\"col-md-12\"><button className=\"btn btn-sm btn-warning m-3\" onClick={this.handleCacheOper} \n                    name=\"clear\" value=\"()\">Clear</button></div>\n                        \n                    \n                    <div className=\"col-md-6 text-md-left font-weight-bold p-2\">DOI</div>\n                    <div className=\"col-md-6 text-md-left font-weight-bold p-2\">Manifest</div>\n                    \n                    \n                          {cachedManifests} \n                    \n                    \n                    <div className=\"col-md-12 p-3 border-bottom\"></div>\n                    <div className=\"col-md-6  text-md-left font-weight-bold p-2\">DOI</div>\n                    <div className=\"col-md-6  text-md-left font-weight-bold p-2\">Data</div>\n                    \n                   \n                            {cachedData}\n                        \n                        \n                              </div>\n        );\n    }\n}\n\nexport default Cache;","import React, { Component } from 'react';\n\n\nclass Network extends Component {\n\n    constructor(props) \n    {\n        super(props)\n\n        this.state = {\n            network: props.network,\n            updateApp: props.updateApp,\n            fetchManifestResult: \"\",\n            fetchDataResult: \"\",\n            doi: \"\",\n            defaultValue: \"Pick DOI from the list\",\n        }\n\n        this.handleFetch = this.handleFetch.bind(this)\n        this.handleDOIChange = this.handleDOIChange.bind(this)\n        this.handleClearDOI = this.handleClearDOI.bind(this)\n    }\n\n    handleDOIChange(event)\n    {\n        this.setState({\n            doi: event.target.value\n        })\n    }\n\n    handleClearDOI() \n     {\n       this.setState({\n        doi: \"\"},  () => \n        console.log(this.state.doi));\n             }\n        \n    \n    async handleFetch(event)\n    {\n        let fetchRes = event.target.value\n\n        if (\"\" === this.state.doi)\n        {\n            this.setState({\n                [fetchRes]: \"Empty DOI\"\n            })\n\n            return\n        }\n\n        this.state.network[event.target.name](this.state.doi).then( res => {\n            \n            this.setState({\n                [fetchRes]: res.status\n            })\n\n            if (\"ok\" === res.status)\n                this.state.updateApp()\n        })\n    }\n\n    render()\n    \n    {\n\n        return (\n\n            <div className=\"Network p-1 bg-secondary rounded-lg text-white\">\n            \n\n                    <div className=\"col-md-12 font-weight-bold p-1\">NETWORK</div>\n                <div className=\"col-md-12\">\n                <select className=\"form-control alert-success alert-dismissible fade show p-2\" \n                id=\"dois\" onChange={this.handleDOIChange} value={this.state.doi}>\n                    <option defaultValue>Choose DOI from the list</option>\n                    <option value=\"03FEE1468FF693744FDEFB20D41E793E6A03CFBDD3687901EA99271DCC702DF8\">Doi 1 {this.state.doi}</option>\n                    <option value=\"00A66067BD93F5417D9E94858795B6E852EF90DE790C543B1E47A2E009D435F3\">Doi 2 {this.state.doi}</option>\n                    <option value=\"0487DEB729ABE42001007D1ADBEF310FE6BCBD308B7A889458F2E1F8B1C5D14E\">Doi 3 {this.state.doi}</option>\n                </select>\n                </div>\n               \n                   \n                                <div  style={{display: this.state.doi ? 'block' : 'none'}}>\n                                <div className=\"col-md-12\">\n                                <button className=\"btn btn-sm active btn-secondary m-3\" onClick={this.handleFetch} name=\"search_manifest_by_doi\" value=\"fetchManifestResult\">Fetch Manifest</button>\n\n                                <div className=\"col-md-12 alert alert-success\">{this.state.fetchManifestResult}</div></div>\n                          \n                                <div className=\"col-md-12\"><button className=\"btn btn-sm active btn-secondary m-3\" onClick={this.handleFetch} name=\"search_data_by_doi\" value=\"fetchDataResult\">Fetch Data</button>\n                                <div className=\"col-md-12 alert alert-success\" style={{display: this.state.doi ? 'block' : 'none'}}>{this.state.fetchDataResult}</div></div>\n\n                                <div className=\"col-md-12\"><button className=\"btn btn-sm btn-warning\" onClick={this.handleClearDOI} name=\"clear_DOI\">Clear</button> </div>\n                                </div>\n                          \n              </div>                             \n              \n\n            \n        );\n    }\n}\n\nexport default Network;","import React, { Component } from 'react';\nimport Manifest from './Manifest.js'\n\nclass Formula extends Component {\n    constructor(props) \n    {\n        super(props)\n\n        this.state = {\n            application: props.application,\n            updateApp: props.updateApp,\n            formula: props.formula,\n            cache: props.application.engine.cache(),\n            network: props.application.engine.network(),\n            evalResult: \"\",\n            dataTogglePopup: props.dataTogglePopup,\n        }\n\n        this.handleEval = this.handleEval.bind(this)\n        \n    }\n\n    \n    handleEval(event)\n    {\n        let btn = event.target\n        let btn_caption = event.target.innerHTML\n\n        event.target.innerHTML = \"evaluating...\";\n\n        this.state.application.engine.eval(this.state.formula).then( result => {\n\n            this.setState({\n                evalResult: result.status\n            })\n            \n            this.state.updateApp()\n\n            btn.innerHTML = btn_caption\n        });\n    }\n\n    getDependencies()\n    {\n        let FromulaDependency = \"\"\n\n        let dependencies = this.props.formula.get_dependencies()\n\n        if (0 === dependencies.data.length)\n        {\n            if (\"ok\" !== dependencies.status)\n                FromulaDependency = \"Error getting dependency: \" + dependencies.status\n            else\n                FromulaDependency = \"Has no dependency\"\n        }\n        else\n            FromulaDependency = dependencies.data.map(dep => <div>{dep.ArgName}<Manifest application={this.state.application} dataTogglePopup={this.state.dataTogglePopup} updateApp={this.state.updateApp} manifest={{data:dep,status:\"ok\"}} /></div>)\n        \n        return FromulaDependency\n    }\n\n    render()\n    {\n        return (\n            <div className=\"col-md-12\">\n                <button className=\"btn btn-sm btn-warning m-2\" onClick={this.handleEval}>Evaluate Formula</button>\n               \n                <div className=\"border-bottom m-2\"></div>\n            {this.state.evalResult}\n            {this.getDependencies()}\n            </div>\n        );\n    }\n}\n\nexport default Formula;","import React, { Component } from 'react';\nimport Formula from './Formula.js';\n\n\n\n\nclass Manifest extends Component {\n    \n    constructor(props) \n    {\n        super(props)\n\n        this.state = {\n            application: props.application,\n            updateApp: props.updateApp,\n            cache: props.application.engine.cache(),\n            network: props.application.engine.network(),\n            manifest: props.manifest,\n            init_manifest: props.manifest,\n            rootManifest: props.rootManifest,\n            showData: props.showData,\n            dataTogglePopup: props.dataTogglePopup,\n            showFormulas: props.showFormulas,\n            \n\n        }\n\n        this.handleFetchManifest = this.handleFetchManifest.bind(this)\n        this.handleRemoveManifest = this.handleRemoveManifest.bind(this)\n        \n        this.handleFetchData = this.handleFetchData.bind(this)\n        this.handleRemoveData = this.handleRemoveData.bind(this)\n        this.handleViewData = this.handleViewData.bind(this)\n        this.handleManifestView = this.handleManifestView.bind(this)\n        \n\n        if (this.state.rootManifest)\n        {\n            this.updateManifest = this.updateManifest.bind(this)\n            this.state.application.setUpdateManifest(this.updateManifest)\n        }\n\n        this.handleChangeManifestFocus = this.handleChangeManifestFocus.bind(this)\n    }\n\n    \n    handleViewData(){\n        this.state.application.updateDataView({MIME : this.state.manifest.data.get_mime().data, data : this.state.manifest.rawData});\n        this.state.updateApp();\n        this.state.dataTogglePopup();\n        \n        \n    }\n    handleManifestView()\n    {\n        let manifest = this.props.manifest;\n        this.state.updateApp();\n        this.state.application.updateDataView({MIME : \"manifest\", data : manifest.data});\n        this.state.dataTogglePopup();\n \n    }\n        \n\n    handleChangeManifestFocus()\n    {\n        if (this.state.rootManifest)\n            this.state.application.PopManifestFocusList()\n        else\n            this.state.application.PushManifestFocusList(this.state.manifest)\n    }\n\n    updateManifest()\n    {\n        this.setState({\n            manifest: this.state.application.getCurrentManifest(),\n            init_manifest: this.state.application.getCurrentManifest(),\n        });\n        this.state.updateApp();\n    }\n\n    handleFetchManifest(event)\n    {\n        let btn = event.target\n        let btn_caption = event.target.innerHTML\n\n        event.target.innerHTML = \"fetching...\";\n\n        this.state.network.search_manifest_by_doi(event.target.value).then( fetchRes => {\n            if (\"ok\" === fetchRes.status)\n            {\n                this.setState({\n                    manifest: fetchRes\n                })\n                \n                this.state.updateApp()\n            }\n            else\n                btn.innerHTML = btn_caption\n        })\n    }\n\n    handleRemoveManifest(event)\n    {\n        if (this.state.cache.delete_manifest_by_doi(event.target.value))\n        {\n            this.setState({\n                manifest: this.state.init_manifest\n            })\n\n            this.state.updateApp()\n        }\n    }\n\n    handleFetchData(event)\n    {\n        let btn = event.target\n        let btn_caption = event.target.innerHTML\n\n        event.target.innerHTML = \"fetching...\";\n\n        this.state.network.search_data_by_doi(event.target.value).then( fetchRes => {\n            \n            if (\"ok\" === fetchRes.status)\n            {\n                let updatedManifest = this.state.manifest\n                updatedManifest.rawData = fetchRes.data\n\n                this.setState({\n                    manifest: updatedManifest\n                })\n            }\n            else\n                btn.innerHTML = btn_caption \n\n            this.state.updateApp()\n        })\n    }\n\n    handleRemoveData(event)\n    {\n        if (this.state.cache.delete_data_by_doi(event.target.value))\n        {\n            let updatedManifest = this.state.manifest\n            updatedManifest.rawData = null\n\n            this.setState({\n                manifest: updatedManifest\n            })\n\n            this.state.updateApp()\n        }\n    }\n\n    getManifestHeader()\n    {\n        \n        let ManifestHeader = <div>\"Has no DOI\"</div>\n\n        let manifestDoi = this.state.manifest.data.get_doi()\n\n        if (\"ok\" === manifestDoi.status)\n        {\n            let doi = manifestDoi.data[0]\n\n            // this trick needs to update same manifests in other formulas !\n            {\n                let manifestInCache = this.state.cache.get_manifest_by_doi(doi)\n                if (\"ok\" === manifestInCache.status)\n                    this.state.manifest = manifestInCache\n                else\n                    this.state.manifest = this.state.init_manifest\n\n                let dataInCache = this.state.cache.get_data_by_doi(doi)\n                if (\"ok\" === dataInCache.status)\n                    this.state.manifest.rawData = dataInCache.data\n                else\n                {\n                    let raw_value = this.state.manifest.data.get_raw_value()\n                    if (\"ok\" === raw_value.status)\n                        this.state.manifest.rawData = raw_value.data\n                    else\n                        this.state.manifest.rawData = null\n                }\n            }\n\n            let manifestMime = (\"ok\" === this.state.manifest.data.get_mime().status) ? \"MIME: '\" + this.state.manifest.data.get_mime().data + \"'\" : this.state.manifest.data.get_mime().status\n\n            let manifestSize = (\"ok\" === this.state.manifest.data.get_size().status) ? \"Size: \" + this.state.manifest.data.get_size().data + \"\" : this.state.manifest.data.get_size().status\n\n            if (doi)\n            {\n                if (doi.length > 10)\n                    ManifestHeader = \"DOI: \" + doi.substr(0,10) + \"...\" + doi.substr((doi.length - 10), 10) \n                     + manifestMime + \", \" + manifestSize\n                else\n                    ManifestHeader = \"DOI: \" + doi + \"; \"  + manifestMime + \", \" + manifestSize\n            }\n            else\n                ManifestHeader = \"Has no DOI \" + manifestMime + \", \" + manifestSize\n\n            if ( null != this.state.manifest.rawData )\n            {    \n                let rawData = new Uint8Array(this.state.manifest.rawData).toString()\n                ManifestHeader = ManifestHeader + \", Data: \" + rawData.substr(0,10) + \"...\" + rawData.substr((rawData.length - 10), 10)\n            }\n            else\n                ManifestHeader = ManifestHeader + \", Has no data\"\n\n            ManifestHeader = ManifestHeader + \")\"\n            \n        }\n\n        let manifestS = <div className=\"text-left m-2\">\n\n        <p className=\"m-1\">MIME: {(this.state.manifest.data.get_mime().data !== null) ? this.state.manifest.data.get_mime().data : \"Has no MIME\"}</p>\n\n         <p className=\"m-1\">Size: {(this.state.manifest.data.get_size().data !== null) ? (this.state.manifest.data.get_size().data/1024).toFixed(2) + \" kB\" : \"Has no size\"}</p>\n\n        <p className=\"m-1 text-truncate\">DOI: {(this.state.manifest.data.get_doi().data !== null) ? this.state.manifest.data.get_doi().data : \"Has no DOI\"}</p>\n\n         <p className=\"m-1\"> Raw Value: {(this.state.manifest.rawData !== null) ? this.state.manifest.data.get_raw_value().data : \"There is no raw value\"}</p>\n      </div>;\n\n    return ManifestHeader && manifestS\n    }\n\n    getManifestControls()\n    {\n        let ManifestControls = \"\"\n       \n        let manifestDoi = this.state.manifest.data.get_doi()\n\n        let viewButton;\n         viewButton=<button className=\"btn btn-sm btn-success m-1\" onClick={this.handleManifestView}>View Manifest</button>\n        \n        \n        let viewDataButton;\n         viewDataButton=<button className=\"btn btn-sm btn-success m-1\" onClick={this.handleViewData}>View Data</button>\n       \n        \n\n        if (\"ok\" === manifestDoi.status)\n        {\n            let doi = manifestDoi.data[0]\n\n            let manifestInCache = this.state.cache.get_manifest_by_doi(doi)\n\n            let mC = \"\"\n            if (\"ok\" === manifestInCache.status)\n                mC = <div ><button className=\"btn btn-sm btn-danger m-1\" onClick={this.handleRemoveManifest} value={doi}>Remove Manifest</button></div>\n                \n            else\n                mC = <div><button className=\"btn btn-sm btn-primary m-1\" onClick={this.handleFetchManifest} value={doi}>Fetch Manifest</button>       \n                </div>\n            \n            let pW = <div>{viewButton}\n            </div>\n               \n\n            let dataInCache = this.state.cache.get_data_by_doi(doi)\n\n            let dC = \"\"\n            if (\"ok\" === dataInCache.status)\n                dC = <div><button className=\"btn btn-sm btn-danger m-1\" onClick={this.handleRemoveData} value={doi}>Remove Data</button></div>\n            else\n                dC = <div><button className=\"btn btn-sm btn-primary m-1\" onClick={this.handleFetchData} value={doi}>Fetch Data</button></div>\n\n            let dV = \"\"\n            if (((\"ok\" === manifestInCache.status)||(\"ok\"===this.state.manifest.data.get_mime().status)) && (\"ok\" === dataInCache.status))\n                dV = <div>{viewDataButton}\n                </div> \n            else\n            {\n                if ((\"ok\"===this.state.manifest.data.get_mime().status) && this.state.manifest.rawData)\n                    dV = <div><button className=\"btn btn-sm btn-info m-1\" onClick={this.handleViewData}>View Data</button>\n                    </div>  \n            }\n\n            \n\n            ManifestControls = <div className=\"btn-group bg-secondary border-0\" role=\"group\" aria-label=\"Manifest controls\">\n            <div>{mC}</div><div>{dC}</div><div>{dV}</div><div>{pW}</div>\n            \n            </div>\n\n        }\n\n        return ManifestControls\n    }\n\n    getManifestFormulas()\n    {\n        let ManifestFromulas = \"\"\n\n        let formulas = this.state.manifest.data.get_formulas()\n\n        if (0 === formulas.data.length)\n        {\n            if (\"ok\" !== formulas.status)\n                ManifestFromulas = \"Error getting formulas: \" + formulas.status\n            else\n                ManifestFromulas = \"Has no formulas\"\n        }\n        else\n            ManifestFromulas = formulas.data.map(formula => <div className=\"bg-secondary text-white\">\n\n            <Formula application={this.state.application} dataTogglePopup={this.state.dataTogglePopup} updateApp={this.state.updateApp} formula={formula}/></div>)\n\n\n        return ManifestFromulas \n    }\n    \n\n    render()\n    {\n        if ((null == this.state.manifest) || (\"ok\" !== this.state.manifest.status))\n        {\n            let outStr = (null != this.state.manifest) ? this.state.manifest.status : \"is not defined\"\n\n            return (\n\n                <nav className=\"Manifest bg-secondary text-white m-2\">\n                    <div className=\"alert alert-success alert-dismissible fade show rounded-lg\">\n                        <div className=\"col-md-12 font-weight-bold\">MANIFEST</div>\n                        <div>{outStr}</div>\n                    </div>\n        </nav>\n            )\n        }\n\n        let focus_button = <button className=\"btn btn-md btn-secondary\" onClick={this.handleChangeManifestFocus}><span role=\"img\" aria-label=\"lookup\">&#x1F50D;</span></button>\n\n        if (this.state.rootManifest)\n        {\n            if (false === this.state.application.ManifestFocusListIsEmpty())\n                focus_button = <button className=\"btn btn-md btn-secondary\" onClick={this.handleChangeManifestFocus}><span role=\"img\" aria-label=\"return\">&#9166;</span></button>\n            else\n                focus_button = \"\";\n        }\n        \n        let show_formulas = \"\";\n        {if (this.props.showFormulas) show_formulas = <div>\n            {focus_button}\n        <div>{this.getManifestFormulas()}</div></div>\n        else show_formulas = null;\n        \n   }\n\n        return (\n            <nav className=\"Manifest\">\n                <div className=\"p-1 border-0 bg-secondary rounded-lg text-white\">\n\n                <div className=\"d-flex justify-content-end m-0\">{focus_button}</div>\n                    <div className=\"alert alert-success alert-dismissible fade show rounded-lg\"> {this.getManifestHeader()}</div>\n                    \n                    <div>\n                    \n                        {this.getManifestControls()}\n                        \n                    </div>\n                   \n                    <div>\n                        {this.getManifestFormulas()} \n                    </div>\n      \n                </div>\n            </nav>\n        );\n    }\n}\n\nexport default Manifest;","import React from 'react';\n\n\nclass NavTabs extends React.Component {  \n    \n  constructor(props) \n  {\n    super(props)\n\n    this.state = {\n      cacheIsShown: props.cacheIsShown,\n      networkIsShown: props.networkIsShown,\n      viewerIsShown: props.viewerIsShown,\n      application: props.application,\n\n     \n    } \n  }\n    render() { \n       \n        return (\n\n     <div className=\"NavTabs bg-secondary text-white rounded-lg p-4\">     \n     <ul className=\"nav nav-tabs bg-secondary md-tabs\" id=\"myTabMD\" role=\"tablist\">\n\n    \n     <li className=\"nav-item \">\n\n    <a className={\"nav-link active btn btn-sm m-2 \" + \n    (this.props.cacheIsShown || this.props.networkIsShown || this.props.viewerIsShown ? \n      \"btn-secondary\" : \"btn-warning\")} id=\"home-tab-md\" data-toggle=\"tab\" href=\"#home-md\" role=\"tab\" \n      aria-controls=\"network-md\"\n      aria-selected=\"true\" onClick={this.props.handleHomePage}>Home</a>\n  </li>\n\n  <li className=\"nav-item\">\n    <a className={\"nav-link active btn btn-sm m-2 \" + \n    (this.props.cacheIsShown ? \"btn-warning\" : \"btn-secondary\")}  id=\"cache-tab-md\" data-toggle=\"tab\" href=\"#cache-md\" role=\"tab\" \n    aria-controls=\"cache-md\"\n      aria-selected=\"false\" onClick={this.props.handleShowCache}>Cache</a>\n  </li>\n\n  <li className=\"nav-item\">\n    <a className={\"nav-link active btn btn-sm m-2 \" + \n    (this.props.networkIsShown ? \"btn-warning\" : \"btn-secondary\")} id=\"network-tab-md\" data-toggle=\"tab\" href=\"#network-md\" role=\"tab\" \n    aria-controls=\"network-md\"\n      aria-selected=\"false\" onClick={this.props.handleShowNetwork}>Network</a>\n  </li>\n  \n  <li className=\"nav-item\">\n    <a className={\"nav-link active btn btn-sm m-2 \" + \n    ( this.props.viewerIsShown ? \"btn-warning\" : \"btn-secondary\")} id=\"viewer-tab-md\" data-toggle=\"tab\" href=\"#viewer-md\" role=\"tab\"\n     aria-controls=\"viewer-md\"\n      aria-selected=\"false\" onClick={this.props.handleShowViewer}>Viewer</a>\n  </li>\n\n  <li className=\"nav-item\">\n    <a className={\"nav-link active btn btn-sm m-2 \" + \n    ( (this.props.application.current_manifest_status === \"ok\") ? \"btn-warning\" : \"btn-secondary\")} id=\"viewer-tab-md\" data-toggle=\"tab\" \n    href=\"#viewer-md\" role=\"tab\" aria-controls=\"viewer-md\"\n      aria-selected=\"false\" onClick={this.props.handleClearAll}>Clear All</a>\n  </li>\n</ul>\n   </div>\n        );\n    }\n}\n\n\nexport default NavTabs;","import React, { Component } from 'react';\nimport './App.css';\nimport Cache from './cmp/Cache.js';\nimport Network from './cmp/Network.js';\nimport Manifest from './cmp/Manifest.js';\nimport DataViewer from './cmp/DataViewer.js';\nimport NavTabs from './cmp/NavTabs.js';\n\n\nclass App extends Component {\n \n  constructor(props) \n  {\n    super(props)\n\n    this.state = {\n      application:  props.application,\n      cache:        props.application.getCache(),\n      network:      props.application.getNetwork(),\n      cacheIsShown: false,\n      networkIsShown: false,\n      viewerIsShown: false,\n      showData: false,\n     \n    }\n    this.updateApp = this.updateApp.bind(this);\n    this.dataTogglePopup = this.dataTogglePopup.bind(this);\n   \n  }\n  dataTogglePopup = () => {  \n    this.setState({  \n       showData: !this.state.showData \n        }); \n          } \n\n    updateApp(){this.forceUpdate()};\n\n     handleShowCache = () => {\n       this.setState({cacheIsShown: !this.state.cacheIsShown})\n      }; \n\n     handleShowNetwork = () => {\n       this.setState({networkIsShown: !this.state.networkIsShown})\n      }; \n\n     handleShowViewer = () => {\n       this.setState({viewerIsShown: !this.state.viewerIsShown})\n      };\n\n     handleHomePage = () => {\n       this.setState({cacheIsShown: false, networkIsShown: false, viewerIsShown: false})\n      }; \n\n     handleClearAll = () => {\n       this.state.application.setNewManifest(null);\n       this.state.cache.clear();\n       this.updateApp();\n      };\n      \n\n  render()\n  \n  {\n      \n    \n    return (\n      <div className=\"container\">\n      <div className=\"App col-lg-12 bg-secondary rounded mb-0 text-white\">\n        <NavTabs \n        handleShowCache={this.handleShowCache} handleShowNetwork={this.handleShowNetwork} handleShowViewer={this.handleShowViewer} \n        handleHomePage={this.handleHomePage} handleClearAll={this.handleClearAll} cacheIsShown={this.state.cacheIsShown} \n        networkIsShown={this.state.networkIsShown} viewerIsShown={this.state.viewerIsShown} application={this.state.application}\n        />\n          <br/>\n       <div>\n        <Manifest application={ this.state.application }  updateApp={this.updateApp} showData={this.state.showData} dataTogglePopup={this.dataTogglePopup.bind(this)}\n        manifest={this.state.application.getCurrentManifest()} rootManifest={true}/> \n        </div>\n        <br/>\n        <div>{this.state.cacheIsShown ?\n        <Cache application={this.state.application} showData={this.state.showData} dataTogglePopup={this.dataTogglePopup.bind(this)} cache={this.state.cache} updateApp={this.updateApp}/> : null}\n        </div>\n        <br/>\n        <div>{this.state.networkIsShown ?\n        <Network network={this.state.network} updateApp={this.updateApp}/> : null}\n        </div>\n        <br/>\n        <div>\n        <DataViewer application={this.state.application}  handleShowViewer={this.handleShowViewer.bind(this)} dataTogglePopup={this.dataTogglePopup.bind(this)} showData={this.state.showData} viewerIsShown={this.state.viewerIsShown}/> \n      </div>\n         </div>\n         </div>\n    );\n  }\n}\n\nexport default App;\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React, { Component } from 'react';\n\nclass RunButton extends Component {\n\n    constructor(props) \n    {\n        super(props)\n\n        this.state = {\n            application: props.application,\n            textAreaID: props.textAreaID,\n        }\n\n        this.actionClick = this.actionClick.bind(this)\n    }\n\n    actionClick(event){\n        let manifestText = document.getElementById(this.state.textAreaID).value\n        this.state.application.setNewManifest(manifestText)\n        \n\n    }\n\n    render() {\n        return (\n            <button className=\"btn btn-sm btn-primary m-2 float-center\" onClick={this.actionClick}>Manifest to App</button>\n        )\n    }\n}\n\nexport default RunButton;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport KolmoApplication from './KolmoApplication.js'\nimport RunButton from './cmp/RunButton.js'\nimport ViewButton from './cmp/ViewButton.js'\n\nlet application = new KolmoApplication(process.env.REACT_APP_DEDICATED_SERVER_ADDRESS);\n\nReactDOM.render(<App application={application}/>, document.getElementById('root'));\n\nvar interactives = document.querySelectorAll(\"div.interactive-canvas\");\n\ninteractives.forEach(function(interactivePanel) {\n\n    if ( interactivePanel.querySelector(\"textarea.manifest-text\") )\n    {\n        let textAreaID = interactivePanel.querySelector(\"textarea.manifest-text\").id;\n        let buttonElement =  interactivePanel.querySelector(\"span.run-button-placeholder\");\n        if ( buttonElement )\n            ReactDOM.render(<RunButton application={application} textAreaID={textAreaID}/>, buttonElement);\n\n        if ( interactivePanel.querySelector(\"span.manifest-data-placeholder\") )\n        {\n            let manifestDataHolderID = interactivePanel.querySelector(\"span.manifest-data-placeholder\").id\n            buttonElement =  interactivePanel.querySelector(\"span.render-button-placeholder\");\n            if ( buttonElement )\n                ReactDOM.render(<ViewButton textAreaID={textAreaID} manifestDataHolderID={manifestDataHolderID}/>, buttonElement);\n        }\n    }\n});\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}